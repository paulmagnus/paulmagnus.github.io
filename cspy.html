<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#00bfff" />
    <meta name="Description"
	  content="CSPy: A Type-Safe Dialect of Python"/>
    <meta name="keywords"
	  content="software,engineer,programmer,Python"/>
    <meta name="author" content="Paul J. Magnus"/>

    <!-- stylesheets -->
    <link rel="stylesheet" href="css/site.css" />
    <link rel="stylesheet" href="css/prism.css" />
    <link rel="stylesheet"
	  href="css/site_small.css"
	  media="(max-width: 40.0625em)"/>
    <link rel="stylesheet"
	  href="css/site_medium.css"
	  media="(min-width: 40.0625em) and (max-width: 64.0625em)"/>
    <link rel="stylesheet"
	  href="css/site_large.css"
	  media="(min-width: 64.0625em)"/>
    <link rel="stylesheet" href="css/cspy.css" />

    <script src="javascript/prism.js"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400&amp;subset=latin-ext" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

    <!-- icon -->
    <link rel="icon" type="image/png" href="images/icon.png" />

    <!-- manifest -->
    <link rel="manifest" href="manifest.json" />

    <title>CSPy: A Type-Safe Dialect of Python</title>
  </head>

  <body>
    <nav>
      <div class="row">
	<!-- <div class="small-12 column"> -->
	  <h1>CSPy: A Type-Safe Dialect of Python</h1>

	  <!-- <h2> -->
	  <!--   <a href="index.html"> -->
	  <!--     <i class="fa fa-home"></i> -->
	  <!--   </a> -->
	  <!-- </h2> -->
	<!-- </div> -->
      </div>
    </nav>

    <main>

      <section>
	<div class="row">
	  <h6>Paul Magnus '18, Ines Ayara '20, Matthew R. Jenkins '20, and
	    Professor Alistair Campbell<br/>
	    Department of Computer Science, Hamilton College, Clinton, NY 13323
	    <br/>
	    The Charles McLouth III '52 Endowment
	  </h6>
	</div>

      	<div class="row">
      	  <p class="justify">
      	    CSPy is a type-safe dialect of Python designed for teaching new
      	    computer science students how to write programs with good coding
      	    practices. Python is commonly used as an introductory programming
      	    language because it is more intuitive than many other languages
      	    but Python allows for a variety of bad coding practices,
      	    especially with repect to its dynamic typing system. CSPy improves
      	    on Python by encouraging the programmer to be conscious about the
      	    types of variables present in thier code. In the summer of 2017,
      	    the third summer of CSPy development, we extended the CSPy
      	    language, including the ability to import Python programs and work
      	    with graphics through a new graphics library. CSPy can now be used
      	    for teaching good coding habits in introductory computer science
      	    courses.
      	  </p>

	  <hr/>

	  <a href="https://github.com/paulmagnus/CSPy">
	    <i class="fa fa-github" aria-hidden="true"></i>
	    Click here for the github repository
	    <i class="fa fa-arrow-right" aria-hidden="true"></i>
	  </a>
      	</div>
      </section>

      <section>
	<h2>Introduction to CSPy</h2>

	<div class="row">
	  <p class="justify">
	    The CSPy language is based upon Python. The following section will
	    highlight the differences between Python and CSPy. Generally, CSPy
	    is slightly more verbose than Python and a little less flexible
	    but the goal of CSPy has always been to help new students a more
	    aware of the code that they are writing while still keeping the
	    ease of Python coding. Each of the major changes helps with these
	    goals.
	  </p>
	</div>
	
	<div class="panel row">
	  <h3>Variable Declaration and Types</h3>
	  
	  <p class="justify">
	    Each variable declared in CSPy has to be declared at the beginning
	    of each function or class definition in the following format.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre data-lang="CSPy"><code class="language-cspy">
		:: NAME : TYPE ::
	    </code></pre>
	  </div>

	  <p class="justify">
	    <code>NAME</code> can be any variable name following the regular
	    expression <code>[a-zA-Z_][a-zA-Z0-9_]*</code>. The base types are
	    int, float, bool, and string.
	  </p>

	  <h4>Lists</h4>
	  <p class="justify">
	    Lists are homogeneous, that is every element of a list has the same
	    type. This type is given as part of the declaration of the type.
	    The code shown here declares two lists in the current scope. The
	    first is a list of integers and the second is a list of floats.
	    Either syntax may be used at any time.
	  </p>
	  
	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy">
		:: lst : list of int,
		   lst2 : [float] ::
	    </code></pre>
	  </div>

	  <h4>Tuples</h4>
	  <p class="justify">
	    Tuples are fixed in size but can contain a variety of different
	    types. Similarly, these types are stated within the declaration.
	    The code shown below declares two tuples; the first contains two
	    integers and the second contains an integer, a float, and a string.
	    Either syntax may be used at any time.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy">
		:: point : tuple of (int * int),
		   values : (int * float * string) ::
	    </code></pre>
	  </div>

	  <h4>Dictionaries</h4>
	  <p class="justify">
	    CSPy dictionaries, like Python dictionaries, are hash maps between
	    key-value pairs. For CSPy dictionaries, all keys have the same
	    type and all values have the same type. A dictionary that with 
	    integer keys and string values is shown here.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy">
		:: d : dict of [int | string] ::
	    </code></pre>
	  </div>

	  <!-- Sets, frozensets, generators, file -->

	  <h4>Functions and Procedures</h4>
	  <p class="justify">
	    The type of a function is defined by the types of its parameters and
	    return type. This is the fundemental method by which CSPy is able to
	    verify the validity of the type system. Procedures are simply
	    functions that do not have any return value. The following code
	    declares a function that takes two integers as parameters and
	    returns an integer, and a procedure that takes a float as an
	    argument. This is not likely to be used
	    often since when functions and procedures are created normally
	    their type is determined automatically by the compiler.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy">
		:: foo : fn (int, int) -> int,
		   bar : proc (float) ::
	    </code></pre>
	  </div>
	</div>

	<div class="panel row">
	  <h3>Functions and Procedures</h3>

	  <p class="justify">
	    Functions have the same syntax as they do in Python but with the
	    addition of the types of the parameters and return value. The
	    function below takes the radius of a circle as a parameter and
	    returns the area of the circle. Both values are floats. When the
	    program is compiled, at the beginning of execution, the compiler
	    verifies that the types of parameters and return values match
	    the types of the variables that are used.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy">
		def circle_area(radius : float) -> float:
		    return 3.14 * radius ** 2
	    </code></pre>
	  </div>

	  <p class="justify">
	    Functions and procedures may be overloaded if the types of the
	    parameters are different. This is similar to C++ function overloads.
	    For example, in the following program, the two instances of foo will
	    result in two separate functions depending on the type of the
	    parameters while the two instances of bar will cause an error since
	    they have the same signature.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy">
		def foo(x : int) -> int:
		    return 4 * x

		def foo(x : float) -> float:
		    return 2.5 * x

		def bar(s : string):
		    print s

		def bar(s : string):
		    print 'procedure bar'
		    print s
	    </code></pre>
	  </div>
	</div>

	<div class="panel row">
	  <h3>Classes</h3>

	  <p class="justify">
	    New types may be created through the use of classes. A simple
	    definition of the class Circle is shown below. The first part of
	    a class is the variable block shown on lines 2 and 3. This contains
	    all of the class attributes besides its functions. The constructor
	    for the class has the same name as the class itself and has no
	    return type.
	  </p>

	  <div class="code-header" data-lang="CSPy">
	    <pre><code class="language-cspy line-numbers">
		class Circle:
		    :: center : tuple of (int * int),
		       radius : int ::

		    def Circle(x : int, y : int, r : int):
		        center = (x, y)
		        radius = r

		    def area() -> float:
		        return 3.14 * (radius ** 2)
	    </code></pre>
	  </div>

	  <!-- Continue classes section -->
	  
	</div>
      </section>

      <!-- <section> -->
      <!-- 	<h2>CSPy vs. Python</h2> -->
      <!-- 	<div class="grid large-1-col medium-1-col small-1-col"> -->
      <!-- 	  <p class="justify"> -->
      <!-- 	    CSPy is a statically typed dialect of Python. Python itself is -->
      <!-- 	    dynamically typed, meaning that the type of a variable is -->
      <!-- 	    interpreted at runtime, and type errors will cause running -->
      <!-- 	    programs to terminate. Variables in CSPy are declared with a named -->
      <!-- 	    type similar to Java and C. Since the type of variables is known at -->
      <!-- 	    compile time, CSPy source code is checked for any type errors before -->
      <!-- 	    a program is executed to reduce the amount and time of debugging. -->
      <!-- 	    Consider the point class shown in Python compared to that shown in -->
      <!-- 	    CSPy. -->
      <!-- 	  </p> -->

      <!-- 	  <div class="code-header" data-lang="Python"> -->
      <!-- 	    <pre data-lang="Python"><code class="language-python line-numbers"> -->
      <!-- 	      import math -->

      <!-- 	      class Point: -->
      <!-- 	          def __init__(self, center): -->
      <!-- 	              self._center = center -->

      <!-- 	          def set_location(self, center): -->
      <!-- 	              self._center = center -->

      <!-- 	          def get_location(self): -->
      <!-- 	              return self._center -->

      <!-- 	          def distance(self, other): -->
      <!-- 	              return math.sqrt((self.center[0] - other.center[0]) ** 2 + -->
      <!-- 	                               (self.center[1] - other.center[1]) ** 2) -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <div class="code-header" data-lang="CSPy"> -->
      <!-- 	    <pre data-lang="CSPy"><code class="language-cspy line-numbers"> -->
      <!-- 		import math -->

      <!-- 		class Point: -->
      <!-- 		    :: center : tuple of (float * float) :: -->

      <!-- 		    def Point(center : tuple of (float * float)): -->
      <!-- 		        self.center = center -->

      <!-- 		    def set_location(center : tuple of (float * float)): -->
      <!-- 		        self.center = center -->

      <!-- 		    def get_location() -> tuple of (float * float): -->
      <!-- 		        return self.center -->

      <!-- 		    def distance(other : Point) -> float: -->
      <!-- 		        return math.sqrt((center[0] - other.center[0]) ** 2 + -->
      <!-- 		                         (center[1] - other.center[1]) ** 2) -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <h3>Variables and Types</h3> -->

      <!-- 	  <p class="justify"> -->
      <!-- 	    Line 4 in the CSPy code is the first change between the two. This is -->
      <!-- 	    a CSPy declaration block. Declaration blocks appear at the beginning -->
      <!-- 	    of any new scope containing variables that are local to that scope. -->
      <!-- 	    This can be at the beginning of the file for global variables, -->
      <!-- 	    at the beginning of a class for class attributes, or at the -->
      <!-- 	    beginning of a function. Each variable is given a type upon -->
      <!-- 	    declaration and multiple variables declarations are separated by -->
      <!-- 	    commas. If an initial value is desired, the syntax -->
      <!-- 	    is as follows. -->
      <!-- 	  </p> -->

      <!-- 	  <div class="code-header" data-lang="CSPy"> -->
      <!-- 	    <pre><code class="language-cspy"> -->
      <!-- 		:: x : int = 0, -->
      <!-- 		   y : float = 4.5 :: -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <p class="justify"> -->
      <!-- 	    Parameters to functions are also given types upon declaration. -->
      <!-- 	  </p> -->

      <!-- 	  <div class="code-header" data-lang="CSPy"> -->
      <!-- 	    <pre><code class="language-cspy"> -->
      <!-- 		def set_location(center : tuple of (float * float)): -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <p class="justify"> -->
      <!-- 	    The return type of a function is given directly after the standard -->
      <!-- 	    Python declaration with and arrow (<code>-></code>) followed by the -->
      <!-- 	    return type. For example, the function below returns an integer. -->
      <!-- 	  </p> -->

      <!-- 	  <div class="code-header" data-lang="CSPy"> -->
      <!-- 	    <pre><code class="language-cspy"> -->
      <!-- 		def foo(x : int) -> int: -->
      <!-- 		    return x * 2 -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <p class="justify"> -->
      <!-- 	    All of the standard Python types are present in CSPy. -->
      <!-- 	  </p> -->
      <!-- 	</div> -->

      <!-- </section> -->

      <!-- <section> -->
      <!-- 	<div class="grid small-1-col"> -->

      <!-- 	  <h2>Error Messages and Traceback</h2> -->

      <!-- 	  <div> -->
      <!-- 	    <pre><code class="language- wrap"> -->
      <!-- 		CSPy : TypeError -->
      <!-- 		File: brokenfunction.cspy -->
      <!-- 		Line 2, Column 11: int -->
      <!-- 		    print(x + " is the number!") -->
      <!-- 		          ^ -->
      <!-- 		Line 2, Column 15: string -->
      <!-- 		    print(x + " is the number!") -->
      <!-- 		              ^^^^^^^^^^^^^^^^^ -->

      <!-- 		The binary operator '+' is defined for the left-hand side (int), but it does not have a signature matching the right-hand size (string). -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <div> -->
      <!-- 	    <pre><code class="language- wrap"> -->
      <!-- 		Traceback (most recent call last): -->
      <!-- 		  File "brokenfunction.py", line 2, in <module> -->
      <!-- 		    print(x + " is the number!") -->
      <!-- 		TypeError: unsupported operand type(s) for +: 'int' and 'str' -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <div> -->
      <!-- 	    <pre><code class="language- wrap"> -->
      <!-- 		Traceback (most recent call last): -->
      <!-- 		  File "brokenfunction.py", line 4, in &lt;module&gt; -->
      <!-- 		    brokenfunction(1) -->
      <!-- 		  File "brokenfunction.py", line 2, in brokenfunction -->
      <!-- 		    return x / 0 -->
      <!-- 		ZeroDivisionError: integer division or modulo by zero -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <div> -->
      <!-- 	    <pre><code class="language- wrap"> -->
      <!-- 		THERE IS AN ERROR IN FILE 'brokenfunction.cspy', LINE 2: -->
      <!-- 		    return x / 0 -->


      <!-- 		ZeroDivisionError: integer division or modulo by zero -->


      <!-- 		TRACEBACK: -->
      <!-- 		File 'brokenfunction.cspy', line 4: -->
      <!-- 		    print(brokenfunction(1)) -->

      <!-- 		File 'brokenfunction.cspy', line 2: -->
      <!-- 		    return x / 0 -->
      <!-- 	    </code></pre> -->
      <!-- 	  </div> -->

      <!-- 	  <div> -->
      <!-- 	    <p class="justify"> -->
      <!-- 	      CSPy is a statically typed dialect of Python. Python itself is -->
      <!-- 	      dynamically typed, meaning that the type of avariable is -->
      <!-- 	      interpreted at runtime, and type errors cause running programs to -->
      <!-- 	      terminate. Variables in Python are defined, not declared, as -->
      <!-- 	      opposed to CSPy, where each variable must be declared with a named -->
      <!-- 	      type. Because the type of a variable is known at compile time, -->
      <!-- 	      CSPy source code is checked for type errors before a program is -->
      <!-- 	      executed to reduce the amount of debugging. All declariations in -->
      <!-- 	      CSPy take place in a variable block (denoted by starting and -->
      <!-- 	      ending "::" symbols) at the beginning of a code block. The -->
      <!-- 	      variable block below contains declarations for CSPy's main built -->
      <!-- 	      in types: -->
      <!-- 	    </p> -->
      <!-- 	  </div> -->

      <!-- 	  <div> -->
      <!-- 	    <p class="justify"> -->
      <!-- 	      The lexing file contains a series of regular expressions -->
      <!-- 	      corresponding to all of the tokens in the CSPy language. The lexer -->
      <!-- 	      receives source code as input and produces a token stream; if it -->
      <!-- 	      encounters any unknown tokens, an error will occur. -->
      <!-- 	    </p> -->
      <!-- 	  </div> -->

      <!-- 	  <div> -->
      <!-- 	    <p class="justify"> -->
      <!-- 	      The parsing file contains function definitions, each prefixed with -->
      <!-- 	      "p_" followed by the name of a nonterminal, which define the rules -->
      <!-- 	      in the grammar for the given nonterminal. It also contains -->
      <!-- 	      specific error rules for dealing with errors in the parsing of a -->
      <!-- 	      file. -->
      <!-- 	    </p> -->
      <!-- 	  </div> -->
      <!-- 	</div> -->
      <!-- </section> -->
    </main>
  </body>
</html>
